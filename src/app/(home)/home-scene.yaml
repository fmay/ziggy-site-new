width: 700
bgColor: #red

variables:
  - DiffY: 50
  - NumCards: 3

repeat1:
  - steps:
      - delay: 1000
        duration: 3000
        actions:
          - target: MorphCRMLeft
            actions:
              morph:
          - target: MorphERPRight
            actions:
              morph:
      - delay: 0
        duration: 3000
        actions:
          - target: MorphERPLeft
            actions:
              morph:
          - target: MorphDBRight
            actions:
              morph:
      - delay: 0
        duration: 3000
        actions:
          - target: MorphAPILeft
            actions:
              morph:
          - target: MorphCRMRight
            actions:
              morph:
      - delay: 0
        duration: 3000
        actions:
          - target: MorphWarehouseLeft
            actions:
              morph:
          - target: MorphERPRight
            actions:
              morph:
      - delay: 0
        duration: 3000
        actions:
          - target: MorphCRMLeft
            actions:
              morph:
          - target: MorphAPIRight
            actions:
              morph:

repeat2:
  - steps:
    # RESET CARD COORDS
    - delay: 1500
      duration: 10
      imageActions:
        - target: CardFast
          actions:
            - move: [_, {DiffY * 3}, 0]
        - target: CardIntegrate
          actions:
            - move: [_, {DiffY * 2}, 0]
        - target: CardOneInstance
          actions:
            - move: [_, {DiffY * 1}, 0]
        - target: CardCluster
          actions:
            - move: [_, {DiffY * 0}, 0]

    # STEP 1
    - delay: 0
      duration: 1500
      imageActions:
        - target: CardFast
          actions:
            - flip: [front, 1500]
            - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
            - fade: [0, 1500]

        - target: CardIntegrate
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardOneInstance
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardCluster
          actions:
            - moveRelative: [0, { DiffY }, 1500]

    - delay: 0
      duration: 100
      imageActions:
        - target: CardFast
          actions:
            - unflip: 0
            - move: [_, 0]
            - fade: [100, 20]
            - zIndex: 0

  # STEP 2
    - delay: 1500
      duration: 1500
      imageActions:
        - target: CardIntegrate
          actions:
            - flip: [front, 1500]
            - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
            - fade: [0, 1500]

        - target: CardFast
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardOneInstance
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardCluster
          actions:
            - moveRelative: [0, { DiffY }, 1500]

    - delay: 0
      duration: 100
      imageActions:
        - target: CardIntegrate
          actions:
            - unflip: 0
            - move: [_, 0]
            - fade: [100, 20]
            - zIndex: 0

    # STEP 3
    - delay: 1500
      duration: 1500
      imageActions:
        - target: CardOneInstance
          actions:
            - flip: [front, 1500]
            - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
            - fade: [0, 1500]

        - target: CardFast
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardIntegrate
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardCluster
          actions:
            - moveRelative: [0, { DiffY }, 1500]

    - delay: 0
      duration: 100
      imageActions:
        - target: CardOneInstance
          actions:
            - unflip: 0
            - move: [_, 0]
            - fade: [100, 20]
            - zIndex: 0

    # STEP 4
    - delay: 1500
      duration: 1500
      imageActions:
        - target: CardCluster
          actions:
            - flip: [front, 1500]
            - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
            - fade: [0, 1500]

        - target: CardFast
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardIntegrate
          actions:
            - moveRelative: [0, { DiffY }, 1500]
        - target: CardOneInstance
          actions:
            - moveRelative: [0, { DiffY }, 1500]

    - delay: 0
      duration: 100
      imageActions:
        - target: CardCluster
          actions:
            - unflip: 0
            - move: [_, 0]
            - fade: [100, 20]
            - zIndex: 0
