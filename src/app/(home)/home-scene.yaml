variables:
  - DiffY: 50
  - NumCards: 3

repeats:
  - steps:
      - delay: 0
        duration: 2000
        actions:
          - target: MorphCRMLeft
            actions:
              morph:
          - target: MorphERPRight
            actions:
              morph:
      - delay: 0
        duration: 2000
        actions:
          - target: MorphERPLeft
            actions:
              morph:
          - target: MorphDBRight
            actions:
              morph:


steps:
  # STEP 1
  - delay: 0
    duration: 1500
    imageActions:
      - target: CardCluster
        actions:
          - flip: [front, 1500]
          - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
          - fade: [0, 1500]

#      - target: LineCRMLeft
#        actions:
#          - draw:

      - target: CardOneInstance
        actions:
          - moveRelative: [0, { DiffY }, 1500]

      - target: CardFast
        actions:
          - moveRelative: [0, { DiffY }, 1500]

  - delay: 0
    duration: 100
    imageActions:
      - target: CardCluster
        actions:
          - unflip: 0
          - move: [_, 0]
          - fade: [100, 20]
          - zIndex: 0

# STEP 2
  - delay: 1500
    duration: 1500
    imageActions:
      - target: CardOneInstance
        actions:
          - flip: [front, 1500]
          - moveRelative: [0, { NumCards * (DiffY + 20) }, 1500]
          - fade: [0, 1500]

#      - target: LineERPLeft
#        actions:
#          - draw:

      - target: CardCluster
        actions:
          - moveRelative: [0, { DiffY }, 1500]

      - target: CardFast
        actions:
          - moveRelative: [0, { DiffY }, 1500]

  - delay: 100
    duration: 100
    imageActions:
      - target: CardOneInstance
        actions:
          - unflip: 0
          - move: [_, 0]
          - fade: [100, 20]
          - zIndex: 0
